#FROM radupopescu/musl-builder
FROM ubuntu

# install unzip
RUN apt-get install -y unzip

# install curl
#RUN apk --no-cache --upgrade add curl
RUN apt-get update -y
RUN apt-get install -y curl

# install rust n co
RUN curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s - -y
RUN source $HOME/.cargo/env

# prep cargo-make install
RUN temp_file="$(mktemp)"
RUN temp_dir="$(mktemp -d)"

# install cargo-make
RUN curl -L# https://github.com/sagiegurari/cargo-make/releases/download/0.26.2/cargo-make-v0.26.2-x86_64-unknown-linux-musl.zip --output "$temp_file"
RUN unzip "$temp_file" -d "$temp_dir"
RUN mv "$temp_dir/cargo-make-v0.26.2-x86_64-unknown-linux-musl/cargo-make" "$HOME/.cargo/bin/cargo-make"
